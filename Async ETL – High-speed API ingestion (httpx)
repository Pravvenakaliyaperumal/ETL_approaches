import httpx
import asyncio

async def fetch(client, url):
    resp = await client.get(url, timeout=5)
    return resp.json()

async def fetch_all(urls):
    async with httpx.AsyncClient() as client:
        tasks = [fetch(client, url) for url in urls]
        return await asyncio.gather(*tasks)

if __name__ == "__main__":
    urls = [f"https://api.example.com/user/{i}" for i in range(1, 1001)]
    data = asyncio.run(fetch_all(urls))
    print("Records fetched:", len(data))
